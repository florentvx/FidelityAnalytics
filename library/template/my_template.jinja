<!DOCTYPE html>
<html lang="en">

<style>
    table, th, td {
        border:1px solid black;
        border-collapse: collapse;
    }
</style>

<head>
    <title>Fidelity Analytics</title>
    {# meta data displayed in header's bar of internet navigator #}
</head>

<body>
    <h1>Fidelity Analytics</h1>
    User: {{ user_name }}<br>
    Date: {{ date }}<br>
    
    <br>
    ---------------

    <h2>Total Statistics</h2>

    <table style="width:100%">
        <tr>
            <th>Total</th>
            <th>Total Cash</th>
            <th>Total Assets</th>
            <th>Dividends Sum</th>
            <th>Dividends Ratio</th>
            <th>Dividends Expected</th>
        </tr>
        <tr>
            <td>{{ total_data.total_value }}</td>
            <td>{{ total_data.total_cash }}</td>
            <td>{{ total_data.total_assets }}</td>             
            <td>{{ total_data.dividends_sum }}</td>
            <td>{{ total_data.dividends_ratio }}</td>
            <td>{{ total_data.dividends_expectation }}</td>
        </tr>
    </table>
    <br>
    ---------------

    <h2>Asset Statistics</h2>

    <table style="width:100%">
        <tr>
            <th>Name</th>
            <th>Market Price</th>
            <th>Quantity</th>
            <th>Amount</th>
            <th>Purchased Price</th>
            <th>Return</th>
            <th>PnL</th>
            <th>Dividends Sum</th>
            <th>Dividends Ratio</th>
            <th>Dividends Expected</th>
        </tr>

        {% for item in data -%}
            <tr>
                <td>{{ data[item].name }}</td>
                <td>{{ data[item].market_price }}</td>
                <td>{{ data[item].quantity }}</td>
                <td>{{ data[item].amount }}</td>
                <td>{{ data[item].purchased_price }}</td>
                <td>{{ data[item].return }}</td>
                <td>{{ data[item].pnl }}</td>
                <td>{{ data[item].dividends_sum }}</td>
                <td>{{ data[item].dividends_ratio }}</td>
                <td>{{ data[item].dividends_expectation }}</td>
            </tr>
        {% endfor %}
    </table>
    <br>
    ---------------

    <h3>Dividends Schedule</h3>

    <table style="width:100%">
        <tr>
            <th>Month</th>
            {% for item in div_data -%}
                <th>{{ item }}</th>
            {% endfor %}
            <th>Total</th>
        </tr>

        {% for i in range(12) -%}
            <tr>
                <td>{{ month_list[i] }}</td>
                {% for item in div_data -%}
                    <td>{{ div_data[item][i] }}</td>
                {% endfor %}
                <td>{{ div_data_total[i] }}</td>
            </tr>
        {% endfor %}
    </table>
    <br>


    ---------------

    <h2>Graphs</h2>
    
    {% for plt in plots -%}
        <img src="{{plt}}"><br>
    {% endfor %}
    
    

</body>
</html>